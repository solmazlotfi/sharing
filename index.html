
<title>
    Web Share API
</title>
<head>
    <meta property="og:description" content=" digital wallet (or e-wallet) is a software-based system that securely stores users' payment information and passwords for numerous payment methods and websites. By using a digital wallet, users can complete purchases easily and quickly with near-field communications technology" />
    <meta property="og:site_name" content="irankish" />
    <meta property="og:title" content="Qput" />
    <meta property="og:image" content="http://www.kiccc.com/Content/_Layouts/Spring_Home.fa-IR/imgs/irankish_logo.png" itemprop="image" />
    <meta property="og:type" content="website" />
    <meta content="http://www.kiccc.com/Content/_Layouts/Spring_Home.fa-IR/imgs/irankish_logo.png" itemprop="image">
    <style>
        .add-button {
            position: absolute;
            top: 1px;
            left: 1px;
        }
    </style>

</head>
<body>
    <br />
    <div>
        for test1
        <br />
        <input type="text" value="Qput" id="title" />
        <br />
        <input type="text" value="Check out Qput." id="text" />
        <br />
        <input type="text" value="https://web.dev/" id="url" />
        <br />
        <input type="file" id="file" />
        <br />
        <button onclick="share()">Share</button>
        <button id="addb" class="add-button" style="display:block">Add to home screen</button>
    </div>
    <!-- Visual Studio Browser Link -->
    <script type="application/json" id="__browserLink_initializationData">
        {"appName":"Chrome","requestId":"2d398a37ecc74543823ede3344ddf6ba"}
    </script>
    <script type="text/javascript" src="http://localhost:18981/40a1f319e8ab4001ae1747cb75bb2814/browserLink" async="async"></script>
    <!-- End Browser Link -->
</body>
<script>
    function share() {

        //navigator.share({
        // url: 'https://solmazlotfi.github.io/sharing/index.html',
        // text: 'Sharing on mobile phone ',
        //         title: "heoooooo",
        // });
        //    return ;

        try {

            navigator.share({
                title: title.value,
                text: text.value,
                url: "https://solmazlotfi.github.io/sharing/index.html",
            })
              .then(() => console.log('Successful '))
              .catch((error) => console.log('Error ', error));

        } catch (err) {
            resultPara.textContent = 'Error: ' + e
        }

    }
</script>
<script type="text/javascript">
    var deferredPrompt;
    var addBtn = document.getElementById('addb'); //document.querySelector('.add-button');
    //addBtn.setAttribute("style", "display:block;");
    //addBtn.style.display = 'none';

    window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
        // Update UI to notify the user they can add to home screen
        addBtn.style.display = 'block';

        //addBtn.addEventListener('click', (e) => {
        //    // hide our user interface that shows our A2HS button
        //    addBtn.style.display = 'none';
        //    // Show the prompt
        //    deferredPrompt.prompt();
        //    // Wait for the user to respond to the prompt
        //    deferredPrompt.userChoice.then((choiceResult) => {
        //        if (choiceResult.outcome === 'accepted') {
        //            console.log('User accepted the A2HS prompt');
        //        } else {
        //            console.log('User dismissed the A2HS prompt');
        //        }
        //        deferredPrompt = null;
        //    });
        //});
        showAddToHomeScreen();
    });

    function showAddToHomeScreen() {
        addBtn.style.display = "block";
        addBtn.addEventListener("click", addToHomeScreen);
    }

    function addToHomeScreen() {
        //var a2hsBtn = document.querySelector(".ad2hs-prompt");

        // hide our user interface that shows our A2HS button a2hsBtn.
        addBtn.style.display = 'none';

        // Show the prompt
        deferredPrompt.prompt();

        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice.then(function (choiceResult) {

            if (choiceResult.outcome === 'accepted') {
                alert('User accepted the A2HS prompt');
            }
            else {
                alert('User dismissed the A2HS prompt');
            }
            deferredPrompt = null;
        });
    }

    window.addEventListener('appinstalled', (event) => {
        alert('installed');
    })

    if (window.matchMedia('(display-mode: standalone)').matches) {
        alert('display-mode is standalone');
    }

    if (window.navigator.standalone === true) {
        alert('display-mode is standalone');
    }

</script>
